(this.webpackJsonpshop=this.webpackJsonpshop||[]).push([[0],{12:function(e,t,c){e.exports={container:"Product_container__3zAAq",mainContainer:"Product_mainContainer__1hlzJ",column:"Product_column__4qeqe"}},15:function(e,t,c){e.exports={control:"AddProduct_control__2hPzM"}},18:function(e,t,c){e.exports={NavItem:"NavItem_NavItem__kGZfL",active:"NavItem_active__1d0-W"}},33:function(e,t,c){e.exports={Toolbar:"Toolbar_Toolbar__3rM3K"}},34:function(e,t,c){e.exports={NavItems:"NavItems_NavItems__1QIgK"}},36:function(e,t,c){e.exports={Content:"Layout_Content__2R2Zq"}},37:function(e,t,c){e.exports={list:"ProductList_list__2knzE"}},38:function(e,t,c){e.exports={list:"CheckoutList_list__2PHju"}},46:function(e,t,c){},47:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),o=c(30),i=c.n(o),a=(c(46),c(47),c(31)),l=c(32),s=c(40),u=c(39),j=c(33),d=c.n(j),h=c(34),m=c.n(h),b=c(18),O=c.n(b),x=c(13),p=c(0),f=function(e){return Object(p.jsx)("li",{className:O.a.NavItem,children:Object(p.jsx)(x.b,{to:e.link,exact:!0,activeClassName:O.a.active,children:e.children})})},g=function(e){return Object(p.jsxs)("ul",{className:m.a.NavItems,children:[Object(p.jsx)(f,{link:"/",children:"Products"}),Object(p.jsx)(f,{link:"/checkout",children:"Checkout"})]})},v=function(e){return Object(p.jsx)("header",{className:d.a.Toolbar,children:Object(p.jsx)("nav",{children:Object(p.jsx)(g,{})})})},_=c(36),N=c.n(_),k=function(e){Object(s.a)(c,e);var t=Object(u.a)(c);function c(){return Object(a.a)(this,c),t.apply(this,arguments)}return Object(l.a)(c,[{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(v,{}),Object(p.jsx)("main",{className:N.a.Content,children:this.props.children})]})}}]),c}(n.Component),y=c(11),I={url:{productsApi:"https://reactnodeexample.wn.r.appspot.com/product",checkoutApi:"https://checkout-dot-myshop-311923.wn.r.appspot.com"}},C=c(9),S=c.n(C),P=c(15),A=c.n(P),T=function(e){var t=Object(n.useRef)(null),c=Object(n.useRef)(null),r=Object(n.useRef)(null);return Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=new FormData;n.append("title",t.current.value),n.append("price",c.current.value),n.append("image",r.current.files[0]),S()({method:"POST",url:"".concat(I.url.productsApi,"/product"),data:n,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e.data),alert(e.data.message),t.current.value=null,c.current.value=null,r.current.value=null})).catch((function(e){console.log(e)}))},children:[Object(p.jsxs)("div",{className:A.a.control,children:[Object(p.jsx)("label",{htmlFor:"title",children:"Title"}),Object(p.jsx)("input",{type:"text",name:"title",id:"title",ref:t})]}),Object(p.jsxs)("div",{className:A.a.control,children:[Object(p.jsx)("label",{htmlFor:"price",children:"Price"}),Object(p.jsx)("input",{type:"number",name:"price",id:"price",ref:c,min:"0"})]}),Object(p.jsxs)("div",{className:A.a.control,children:[Object(p.jsx)("label",{htmlFor:"image",children:"Image"}),Object(p.jsx)("input",{type:"file",name:"image",id:"image",ref:r,min:"0"})]}),Object(p.jsx)("button",{children:"Add Product"})]})},J=c(37),F=c.n(J),L=c(12),D=c.n(L),R=function(e){return Object(p.jsxs)("div",{className:D.a.mainContainer,children:[Object(p.jsxs)("div",{className:D.a.container,children:[Object(p.jsx)("div",{className:D.a.column,children:Object(p.jsx)("a",{target:"_blank",href:e.imageUrl,rel:"noreferrer",children:Object(p.jsx)("img",{src:e.imageUrl,alt:"productImage"})})}),Object(p.jsx)("div",{className:D.a.column,children:Object(p.jsx)("h2",{children:e.title})}),Object(p.jsx)("div",{className:D.a.column,children:Object(p.jsxs)("h2",{style:{marginLeft:"1rem"},children:["$",e.price]})})]}),Object(p.jsx)("div",{className:D.a.column,children:Object(p.jsx)("button",{onClick:e.addToCheckoutHandler,style:{padding:"0.4rem 1rem",marginRight:"0.5rem"},children:"Add Checkout"})})]})},U=function(e){return Object(p.jsx)("ul",{className:F.a.list,children:e.products.map((function(e){return Object(p.jsx)(R,{title:e.title,price:e.price,imageUrl:e.imageUrl,addToCheckoutHandler:function(){return function(e){var t=JSON.parse(localStorage.getItem("checkout")||"[]"),c=t.findIndex((function(t){return t.id===e.id}));c>=0?t[c].count++:(e.count=1,t.push(e)),localStorage.setItem("checkout",JSON.stringify(t)),alert("Producto agregado correctamente!")}(e)}},e.id)}))})};var H=function(){var e=Object(n.useState)([]),t=Object(y.a)(e,2),c=t[0],r=t[1],o=Object(n.useState)(!1),i=Object(y.a)(o,2),a=i[0],l=i[1],s=Object(p.jsx)("h1",{style:{color:"#e0e0e0"},children:"No products yet..."});return c.length>0&&(s=Object(p.jsx)(U,{products:c})),a&&(s=Object(p.jsx)("h1",{style:{color:"#2196f3 "},children:"Loading..."})),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("section",{children:Object(p.jsx)(T,{})}),Object(p.jsx)("hr",{style:{marginLeft:"25%",marginRight:"25%"}}),Object(p.jsx)("section",{children:Object(p.jsx)("button",{onClick:function(){l(!0),S()({method:"GET",url:"".concat(I.url.productsApi,"/products")}).then((function(e){console.log(e.data),r(e.data.products),l(!1)})).catch((function(e){console.log(e),l(!1)}))},children:"Get products"})}),Object(p.jsx)("section",{children:s})]})},w=c(41),E=c(38),G=c.n(E),q=c(8),z=c.n(q),M=function(e){return Object(p.jsxs)("div",{className:z.a.mainContainer,children:[Object(p.jsxs)("div",{className:z.a.container,children:[Object(p.jsx)("div",{className:z.a.column,children:Object(p.jsx)("a",{target:"_blank",href:e.imageUrl,rel:"noreferrer",children:Object(p.jsx)("img",{src:e.imageUrl,alt:"productImage"})})}),Object(p.jsx)("div",{className:z.a.column,children:Object(p.jsx)("h2",{children:e.title})}),Object(p.jsx)("div",{className:z.a.column,children:Object(p.jsxs)("h2",{style:{marginLeft:"2rem"},children:["$",e.price]})}),Object(p.jsx)("div",{className:z.a.column,children:Object(p.jsxs)("h2",{style:{marginLeft:"2rem"},children:["X",e.count]})})]}),Object(p.jsx)("div",{className:z.a.column,children:Object(p.jsx)("button",{onClick:e.removeFromCheckoutHandler,style:{padding:"0.4rem 1rem",marginRight:"0.5rem"},children:"Remove"})})]})},B=function(e){return Object(p.jsx)("ul",{className:G.a.list,children:e.checkoutItems.map((function(t){return Object(p.jsx)(M,{title:t.title,price:t.price,imageUrl:t.imageUrl,count:t.count,removeFromCheckoutHandler:function(){return e.removeFromCheckoutHandler(t)}},t.id)}))})},K=function(e){return Object(p.jsx)("ol",{children:Object(p.jsxs)("li",{children:[Object(p.jsx)("b",{children:e.invoice_ID}),Object(p.jsx)("ol",{children:e.invoiceDetails.map((function(e){return Object(p.jsxs)("li",{style:{textAlign:"left"},children:[Object(p.jsx)("b",{style:{color:"gray"},children:"ID:"})," ",e.product_ID," [",Object(p.jsx)("b",{style:{color:"gray"},children:"Cantidad:"})," ",e.count,"  ",Object(p.jsx)("b",{style:{color:"gray"},children:"Precio unitario:"}),e.individual_PRICE,"]"]},e.product_ID+"_invoiceDetail")}))})]})})};var Z=function(){var e=Object(n.useState)([]),t=Object(y.a)(e,2),c=t[0],r=t[1],o=Object(n.useState)([]),i=Object(y.a)(o,2),a=i[0],l=i[1],s=Object(n.useState)(!1),u=Object(y.a)(s,2),j=u[0],d=u[1];Object(n.useEffect)((function(){r(JSON.parse(localStorage.getItem("checkout")||"[]"))}),[]);var h=Object(p.jsx)("h1",{style:{color:"#e0e0e0"},children:"No products yet..."}),m=null,b=Object(p.jsx)("h1",{style:{color:"#e0e0e0"},children:"No purchases yet..."});return c.length>0&&(h=Object(p.jsx)(B,{checkoutItems:c,removeFromCheckoutHandler:function(e){var t=JSON.parse(localStorage.getItem("checkout")||"[]"),c=t.findIndex((function(t){return t.id=e.id}));c>=0&&t.splice(c,1),localStorage.setItem("checkout",JSON.stringify(t)),r(JSON.parse(localStorage.getItem("checkout")||"[]"))}}),m=Object(p.jsx)("button",{onClick:function(){var e={checkout:JSON.parse(localStorage.getItem("checkout")||"[]").map((function(e){return{id:e.id,count:e.count}}))};console.log(e),S()({method:"POST",url:"".concat(I.url.checkoutApi,"/purchase"),data:e,headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e.data),localStorage.setItem("checkout","[]"),r(JSON.parse(localStorage.getItem("checkout")||"[]")),alert("se han comprado correctamente los productos")})).catch((function(e){console.log(e)}))},children:"Purchase"})),a.length>0&&(b=a.map((function(e,t){return Object(p.jsx)(K,Object(w.a)({},e),e.invoice_ID+"_invoice")}))),j&&(b=Object(p.jsx)("h1",{style:{color:"#2196f3 "},children:"Loading..."})),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("section",{children:h}),Object(p.jsx)("section",{children:m}),Object(p.jsx)("section",{children:Object(p.jsx)("button",{onClick:function(){console.log("getInvoices"),d(!0),S()({method:"GET",url:"".concat(I.url.checkoutApi,"/purchase")}).then((function(e){console.log(e.data),l(e.data),d(!1)})).catch((function(e){console.log(e),d(!1)}))},children:"Get purchases"})}),Object(p.jsx)("section",{children:b})]})},$=c.p+"static/media/404fail.f306bd15.svg",Q=c(2),W=function(e){var t=Object(Q.f)();return Object(p.jsxs)("div",{style:{textAlign:"center"},children:[Object(p.jsx)("img",{src:$,alt:"notfound",style:{height:"100px"}}),Object(p.jsx)("h1",{children:"404 - Not Found..."}),Object(p.jsx)("h4",{children:t.pathname})]})};var X=function(){return Object(p.jsx)("div",{children:Object(p.jsx)(k,{children:Object(p.jsxs)(Q.c,{children:[Object(p.jsx)(Q.a,{path:"/checkout",component:Z}),Object(p.jsx)(Q.a,{path:"/",exact:!0,component:H}),Object(p.jsx)(Q.a,{path:"*",component:W})]})})})};i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(x.a,{children:Object(p.jsx)(X,{})})}),document.getElementById("root"))},8:function(e,t,c){e.exports={container:"Checkout_container__3udty",mainContainer:"Checkout_mainContainer__Nx1wJ",column:"Checkout_column__2N0iB"}}},[[72,1,2]]]);
//# sourceMappingURL=main.86e42510.chunk.js.map